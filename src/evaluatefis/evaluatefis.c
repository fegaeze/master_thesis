/*
 * File: evaluatefis.c
 *
 * MATLAB Coder version            : 23.2
 * C/C++ source code generated on  : 27-Nov-2023 11:39:07
 */

/* Include Files */
#include "evaluatefis.h"
#include "rt_nonfinite.h"
#include "rt_nonfinite.h"
#include <math.h>

/* Function Declarations */
static double rt_powd_snf(double u0, double u1);

/* Function Definitions */
/*
 * Arguments    : double u0
 *                double u1
 * Return Type  : double
 */
static double rt_powd_snf(double u0, double u1)
{
  double y;
  if (rtIsNaN(u0) || rtIsNaN(u1)) {
    y = rtNaN;
  } else {
    double d;
    double d1;
    d = fabs(u0);
    d1 = fabs(u1);
    if (rtIsInf(u1)) {
      if (d == 1.0) {
        y = 1.0;
      } else if (d > 1.0) {
        if (u1 > 0.0) {
          y = rtInf;
        } else {
          y = 0.0;
        }
      } else if (u1 > 0.0) {
        y = 0.0;
      } else {
        y = rtInf;
      }
    } else if (d1 == 0.0) {
      y = 1.0;
    } else if (d1 == 1.0) {
      if (u1 > 0.0) {
        y = u0;
      } else {
        y = 1.0 / u0;
      }
    } else if (u1 == 2.0) {
      y = u0 * u0;
    } else if ((u1 == 0.5) && (u0 >= 0.0)) {
      y = sqrt(u0);
    } else if ((u0 < 0.0) && (u1 > floor(u1))) {
      y = rtNaN;
    } else {
      y = pow(u0, u1);
    }
  }
  return y;
}

/*
 * Arguments    : const double x[3]
 * Return Type  : double
 */
double evaluatefis(const double x[3])
{
  static const double outputMFCache[204] = {
      0.00069071472861747629, 0.0031816747128445323,  0.00030085306101195879,
      1.898709734892714E-5,   0.00048182233334898104, 0.0043463139325590787,
      0.00043608747424227803, 2.9203278988037064E-5,  0.00033319456059179828,
      0.0058858497920873075,  0.00062663631192586607, 4.4527408987189285E-5,
      0.00022841869512727194, 0.0079016906677744341,  0.00089264806780333826,
      6.7304793900730683E-5,  0.00015523446755983378, 0.01051607416712313,
      0.0012605722658769183,  0.00010085265590638081, 0.00010458452624598054,
      0.013874266222786572,   0.0017647288814029894,  0.00014981367149362397,
      6.98504932679861E-5,    0.018146345424808343,   0.0024491253058555296,
      0.00022061666850123934, 4.6248141817205259E-5,  0.023528329335581619,
      0.003369510274118095,   0.0003220682871650121,  3.035581278593549E-5,
      0.030242366646330936,   0.0045956329119515105,  0.00046610136199261358,
      1.9752051542750404E-5,  0.03853569756778534,    0.0062136479554789781,
      0.00066870650392698535, 1.2741052978643008E-5,  0.048678080259646331,
      0.0083285754364938232,  0.00095107220431132249, 8.1474405417617415E-6,
      0.060957398862066262,   0.011066685559288601,   0.001340954982480178,
      5.1648753522240655E-6,  0.075673213691036342,   0.014577638756259521,
      0.0018742938239106109,  3.2457962694330103E-6,  0.093128090026626753,
      0.019036169550389836,   0.002597071562473104,   2.0221130666454203E-6,
      0.11361665028396548,    0.024643064374662425,   0.0035674091866251109,
      1.2488560474407506E-6,  0.13741243412865803,    0.031625152298841566,
      0.0048578567356884492,  7.6461373252760528E-7,  0.16475281791195168,
      0.0402340088035482,     0.0065578162872426656,  4.6408183864670807E-7,
      0.19582243065697097,    0.050743071818098791,   0.0087759988200311247,
      2.7923497841839356E-7,  0.23073569708443192,    0.063442891613373423,
      0.011642778444781558,   1.6655889557219944E-7,  0.26951932394134354,
      0.07863428653102264,    0.015312266426569144,   9.848920058554137E-8,
      0.31209570691931404,    0.096619258254866752,   0.019963886298912312,
      5.7734067975745332E-8,  0.35826835336455287,    0.11768963457257293,
      0.025803193863888109,   3.3550459527033313E-8,  0.40771047302797436,
      0.14211355269263448,    0.033061656528813828,   1.9328028327325865E-8,
      0.45995787004059718,    0.17012006716130498,    0.041995090458168835,
      1.1038229028558516E-8,  0.51440716339435588,    0.20188235459459414,
      0.052880456941092585,   6.2493380099060218E-9,  0.57032016605518376,
      0.23750018052816582,    0.066010746523613537,   3.5074492532751138E-9,
      0.6268349677582018,     0.27698247629887585,    0.081687735347880472,
      1.9515134294455634E-9,  0.68298390535047937,    0.32023102842916928,
      0.10021248576371139,    1.0764019084768494E-9,  0.737718187500312,
      0.36702639110773594,    0.12187358334845433,    5.885727361048441E-10,
      0.78993849536815874,    0.41701717659566967,    0.14693325276834646,
      3.1904253646942126E-10, 0.83853044064630133,    0.46971384417013073,
      0.17561166977341164,    1.7144301864162213E-10, 0.88240336324895352,
      0.524487985838638,      0.20806997669581251,    9.1330069290095954E-11,
      0.92053062842993949,    0.58057789342736843,    0.244392701228561,
      4.8231474191100941E-11, 0.9519893687860278,     0.63710089160019634,
      0.28457045712344431,    2.5250504073654705E-11, 0.97599753466319461,
      0.69307254828154008,    0.32848395292653743,    1.3104858476080365E-11,
      0.99194618090739428,    0.74743244953464538,    0.37589043261638488,
      6.7424445727547934E-12, 0.99942513054264481,    0.79907577904565974,
      0.42641370294844283,    3.4389447741855161E-12, 0.99824050578119317,
      0.846889506929627,      0.47953885261234469,    1.7388246372393936E-12,
      0.98842308041273019,    0.88979160480526742,    0.53461262935022513,
      8.7158377168359661E-13, 0.97022695126467318,    0.92677139907619677,
      0.59085021123618209,    4.330970769082601E-13,  0.9441186087985628,
      0.95692898257217618,    0.64734879374354837,    2.1334581916646346E-13,
      0.910757063094718,      0.97951154867078838,    0.70310802996413868,
      1.0418514189224679E-13, 0.87096620714702522,    0.99394460363008685,
      0.7570569305068291,     5.0437111321608639E-14, 0.82570103494998548,
      0.99985625164324632,    0.808086382153894,      2.4205685705093835E-14,
      0.77600964609091727,    0.99709311971888059,    0.85508601487891511,
      1.151615075450867E-14,  0.72299314133004855,    0.98572697045842184,
      0.89698377158650788,    5.4315034512296269E-15, 0.66776553743935141,
      0.96605160471956619,    0.93278624843642244,    2.5395428495689527E-15,
      0.61141570966679626,    0.93857024078388229,    0.96161770511740685,
      1.17710118562254E-15,   0.55497312360157136,    0.90397412686083856,
      0.98275561470850514,    5.4087239446256032E-16, 0.49937877145217396,
      0.86311365579026389,    0.99566074154722051,    2.4637611452701215E-16,
      0.44546231381541407,    0.81696366633265616,    1.0};
  static const double b_x[51] = {-0.0002,
                                 -0.000156,
                                 -0.000112,
                                 -6.8E-5,
                                 -2.3999999999999987E-5,
                                 2.0000000000000025E-5,
                                 6.4000000000000011E-5,
                                 0.000108,
                                 0.00015200000000000004,
                                 0.00019600000000000002,
                                 0.00024000000000000006,
                                 0.00028400000000000007,
                                 0.00032800000000000006,
                                 0.00037200000000000004,
                                 0.00041600000000000003,
                                 0.00046,
                                 0.00050400000000000011,
                                 0.00054800000000000009,
                                 0.00059200000000000008,
                                 0.00063600000000000006,
                                 0.00068000000000000016,
                                 0.00072400000000000014,
                                 0.00076800000000000013,
                                 0.00081200000000000011,
                                 0.0008560000000000001,
                                 0.00090000000000000008,
                                 0.00094400000000000007,
                                 0.000988,
                                 0.001032,
                                 0.0010760000000000001,
                                 0.00112,
                                 0.001164,
                                 0.001208,
                                 0.0012519999999999999,
                                 0.001296,
                                 0.0013399999999999998,
                                 0.001384,
                                 0.001428,
                                 0.001472,
                                 0.001516,
                                 0.0015600000000000002,
                                 0.001604,
                                 0.0016480000000000002,
                                 0.001692,
                                 0.0017360000000000001,
                                 0.00178,
                                 0.001824,
                                 0.0018679999999999999,
                                 0.001912,
                                 0.001956,
                                 0.002};
  static const signed char iv[147] = {
      2, 1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2,
      2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 0,
      1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 1, 1, 2, 2, 2, 3, 3, 3, 1, 1, 1, 2,
      2, 2, 3, 3, 3, 1, 1, 1, 2, 2, 2, 3, 3, 3, 1, 1, 1, 2, 2, 2, 3, 3, 3, 0, 0,
      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2,
      3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3};
  static const signed char iv1[49] = {
      1, 4, 3, 2, 1, 1, 1, 4, 4, 3, 3, 3, 2, 4, 4, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1,
      1, 1, 1, 1, 1, 1, 4, 4, 4, 4, 4, 3, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2};
  double orr[2499];
  double arr[51];
  double dv[10];
  double d;
  double ex;
  double sw;
  double tmp;
  double y;
  int i;
  int k;
  int mfIndex;
  int ruleID;
  boolean_T c1Index;
  boolean_T c2Index;
  boolean_T exitg1;
  c1Index = (x[0] <= 18.0);
  c2Index = (x[0] >= 26.0);
  d = -((x[0] - 18.0) * (x[0] - 18.0));
  dv[0] = (exp(d / 32.0) * (double)c1Index + (1.0 - (double)c1Index)) *
          (exp(-((x[0] - 26.0) * (x[0] - 26.0)) / 98.0) * (double)c2Index +
           (1.0 - (double)c2Index));
  tmp = (x[0] - -10.5) * 0.1111111111111111;
  dv[1] = 1.0 / (rt_powd_snf(tmp * tmp, 15.9) + 1.0);
  tmp = (x[0] - 35.0) * 0.058823529411764705;
  dv[2] = 1.0 / (rt_powd_snf(tmp * tmp, 8.0) + 1.0);
  c1Index = (x[0] <= 15.0);
  c2Index = (x[0] >= 18.0);
  dv[3] = (exp(-((x[0] - 15.0) * (x[0] - 15.0)) / 51.004999999999995) *
               (double)c1Index +
           (1.0 - (double)c1Index)) *
          (exp(d / 98.0) * (double)c2Index + (1.0 - (double)c2Index));
  c1Index = (x[1] <= 0.0);
  c2Index = (x[1] >= 0.16);
  d = exp(-(x[1] * x[1]) / 2.0) * (double)c1Index + (1.0 - (double)c1Index);
  dv[4] =
      d * (exp(-((x[1] - 0.16) * (x[1] - 0.16)) / 2.0E-8) * (double)c2Index +
           (1.0 - (double)c2Index));
  c2Index = (x[1] >= 0.21);
  dv[5] =
      d * (exp(-((x[1] - 0.21) * (x[1] - 0.21)) / 2.0E-8) * (double)c2Index +
           (1.0 - (double)c2Index));
  c2Index = (x[1] >= 0.25);
  dv[6] =
      d * (exp(-((x[1] - 0.25) * (x[1] - 0.25)) / 2.0E-8) * (double)c2Index +
           (1.0 - (double)c2Index));
  c1Index = (x[2] <= 0.0);
  c2Index = (x[2] >= 0.14);
  d = exp(-(x[2] * x[2]) / 2.0) * (double)c1Index + (1.0 - (double)c1Index);
  dv[7] =
      d * (exp(-((x[2] - 0.14) * (x[2] - 0.14)) / 2.0E-8) * (double)c2Index +
           (1.0 - (double)c2Index));
  c2Index = (x[2] >= 0.2);
  dv[8] = d * (exp(-((x[2] - 0.2) * (x[2] - 0.2)) / 2.0E-8) * (double)c2Index +
               (1.0 - (double)c2Index));
  c2Index = (x[2] >= 0.3);
  dv[9] = d * (exp(-((x[2] - 0.3) * (x[2] - 0.3)) / 2.0E-8) * (double)c2Index +
               (1.0 - (double)c2Index));
  sw = 0.0;
  for (ruleID = 0; ruleID < 49; ruleID++) {
    double dv1[3];
    mfIndex = iv[ruleID];
    if (mfIndex == 0) {
      d = 1.0;
    } else {
      d = dv[mfIndex - 1];
    }
    dv1[0] = d;
    mfIndex = iv[ruleID + 49];
    if (mfIndex == 0) {
      d = 1.0;
    } else {
      d = dv[mfIndex + 3];
    }
    dv1[1] = d;
    mfIndex = iv[ruleID + 98];
    if (mfIndex == 0) {
      d = 1.0;
    } else {
      d = dv[mfIndex + 6];
    }
    dv1[2] = d;
    if (!rtIsNaN(dv1[0])) {
      mfIndex = 1;
    } else {
      mfIndex = 0;
      k = 2;
      exitg1 = false;
      while ((!exitg1) && (k <= 3)) {
        if (!rtIsNaN(dv1[k - 1])) {
          mfIndex = k;
          exitg1 = true;
        } else {
          k++;
        }
      }
    }
    if (mfIndex == 0) {
      ex = dv1[0];
    } else {
      ex = dv1[mfIndex - 1];
      i = mfIndex + 1;
      for (k = i; k < 4; k++) {
        d = dv1[k - 1];
        if (ex > d) {
          ex = d;
        }
      }
    }
    sw += ex;
    for (k = 0; k < 51; k++) {
      d = outputMFCache[(iv1[ruleID] + (k << 2)) - 1];
      mfIndex = k + 51 * ruleID;
      orr[mfIndex] = d;
      if (d > ex) {
        orr[mfIndex] = ex;
      } else {
        orr[mfIndex] = d;
      }
    }
  }
  for (k = 0; k < 51; k++) {
    tmp = orr[k];
    for (mfIndex = 0; mfIndex < 48; mfIndex++) {
      d = orr[k + 51 * (mfIndex + 1)];
      if ((tmp < d) || rtIsNaN(tmp)) {
        tmp = d;
      }
    }
    arr[k] = tmp;
  }
  if (sw == 0.0) {
    y = 0.0009;
  } else {
    if (!rtIsNaN(arr[0])) {
      mfIndex = 1;
    } else {
      mfIndex = 0;
      k = 2;
      exitg1 = false;
      while ((!exitg1) && (k < 52)) {
        if (!rtIsNaN(arr[k - 1])) {
          mfIndex = k;
          exitg1 = true;
        } else {
          k++;
        }
      }
    }
    if (mfIndex == 0) {
      ex = arr[0];
      mfIndex = 1;
    } else {
      ex = arr[mfIndex - 1];
      i = mfIndex + 1;
      for (k = i; k < 52; k++) {
        d = arr[k - 1];
        if (ex < d) {
          ex = d;
          mfIndex = k;
        }
      }
    }
    y = b_x[mfIndex - 1];
    tmp = fabs(y);
    for (mfIndex = 0; mfIndex < 51; mfIndex++) {
      if (arr[mfIndex] == ex) {
        d = b_x[mfIndex];
        sw = fabs(d);
        if (sw < tmp) {
          tmp = sw;
          y = d;
        }
      }
    }
  }
  return y;
}

/*
 * File trailer for evaluatefis.c
 *
 * [EOF]
 */
